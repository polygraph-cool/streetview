const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/index.BiJ-kt2L.css","../chunks/CM8BuYiJ.js","../chunks/BifLpx9Z.js","../assets/index.CgLs1xwj.css"])))=>i.map(i=>d[i]);
var Ht=t=>{throw TypeError(t)};var Et=(t,e,r)=>e.has(t)||Ht("Cannot "+r);var $=(t,e,r)=>(Et(t,e,"read from private field"),r?r.call(t):e.get(t)),at=(t,e,r)=>e.has(t)?Ht("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Zt=(t,e,r,n)=>(Et(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Nt=(t,e,r)=>(Et(t,e,"access private method"),r);import"../chunks/CWj6FrbW.js";import{M as Se,K as Ee,ai as Ne,b as Pe,E as je,aD as Ae,X as pe,h as Pt,G as Kt,d as Jt,aB as he,F as ze,N as Le,a as Ie,c as jt,aE as At,p as Re,e as Fe,a5 as $t,a4 as Qt,aF as te,a6 as Oe,f as Ce,aG as De,a1 as U,a2 as A,z as ct,aH as Ve,k as h,y as kt,u as ut,q as O,$ as W,A as Mt,o as zt,B as q,C as G,a3 as ht,aI as Be,aJ as ee}from"../chunks/DXf3wbz7.js";import{t as H,a as C,c as lt}from"../chunks/BzZUvcS5.js";import{w as We,d as qe,a as Lt}from"../chunks/C1nhUWUC.js";import{e as Bt,i as Wt,s as B,f as Ge,g as Ft,h as ne,j as Ye,k as re,a as ge,l as Ue,b as oe}from"../chunks/D8kVpoot.js";import{p as st}from"../chunks/CLHIwkiV.js";import{b as ve,i as Q}from"../chunks/BUfRZXnR.js";import{o as qt}from"../chunks/oWna9oPk.js";import{_ as gt}from"../chunks/Dp1pzeXC.js";import{d as Xe}from"../chunks/BO6OmMcj.js";import{S as He,c as ie}from"../chunks/ClZTHCPB.js";function Ze(t,e,r=e){var n=t==="x",o=()=>We(()=>{l=!0,clearTimeout(s),s=setTimeout(a,100),r(window[n?"scrollX":"scrollY"])});addEventListener("scroll",o,{passive:!0});var l=!1,s,a=()=>{l=!1},u=!0;Se(()=>{var i=e();u?u=!1:!l&&i!=null&&(l=!0,clearTimeout(s),scrollTo(window.scrollX,i),s=setTimeout(a,100))}),Ee(o),Ne(()=>{removeEventListener("scroll",o)})}function ae(t,e){var r=pe,n=Oe,o=Ce;$t(t),Qt(t),te(t.ctx);try{e()}finally{$t(r),Qt(n),te(o)}}function ye(t,e,r){var n=t,o;Pe(()=>{var l=pe,s=Jt,a=!1;l.fn=u=>{var i=e.onerror;let p=e.failed;if(!i&&!p||a)throw u;var c=()=>{Re(o),ae(l,()=>{a=!1,o=jt(()=>r(n)),At()})};i==null||i(u,c),o?Fe(o):Pt&&(Kt(s),he(),Kt(ze())),p&&Le(()=>{ae(l,()=>{a=!0;try{o=jt(()=>{p(n,()=>u,()=>c)})}catch(d){De(d,l,null,l.ctx)}At(),a=!1})})},Pt&&Ie(),o=jt(()=>r(n)),At()},je|Ae),Pt&&(n=Jt)}var Ke=H('<link rel="preload" as="font" type="font/woff2" crossorigin="">'),Je=H('<meta name="description"> <meta name="author" content="The Pudding"> <meta name="news_keywords"> <meta property="og:title"> <meta property="og:site_name" content="The Pudding"> <meta property="og:url"> <meta property="og:description"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:image"> <meta property="og:image:type" content="image/jpeg"> <meta property="og:image:width" content="1200"> <meta property="og:image:height" content="628"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="https://pudding.cool"> <meta name="twitter:creator" content="@puddingviz"> <meta name="twitter:title"> <meta name="twitter:description"> <meta name="twitter:image:src"> <meta name="robots" content="max-image-preview:large"> <link rel="canonical"> <!>',1);function $e(t,e){let r=st(e,"title",3,"Title TK"),n=st(e,"description",3,"Description TK"),o=st(e,"url",3,"https://pudding.cool"),l=st(e,"keywords",3,""),s=st(e,"preloadFont",19,()=>[]);qe(a=>{var u=Je(),i=U(u),p=A(i,4),c=A(p,2),d=A(c,4),y=A(d,2),x=A(y,6),P=A(x,14),k=A(P,2),j=A(k,2),R=A(j,4),v=A(R,2);Bt(v,17,s,Wt,(_,f)=>{var g=Ke();ct(()=>B(g,"href",h(f))),C(_,g)}),ct(()=>{Ve.title=r(),B(i,"content",n()),B(p,"content",l()),B(c,"content",r()),B(d,"content",o()),B(y,"content",n()),B(x,"content",`${o()??""}/assets/social-facebook.jpg`),B(P,"content",r()),B(k,"content",n()),B(j,"content",`${o()??""}/assets/social-twitter.jpg`),B(R,"href",`${o()??""}/`)}),C(a,u)})}const Qe=[{block:"intro",id:"carn",val:"1",x1:"156",y1:"898",x:"0.0380859375",y:"0.4384765625",form:"poly",text:""},{block:"intro",id:"carn",val:"1",x1:"176",y1:"898",x:"0.04296875",y:"0.4384765625",form:"poly",text:""},{block:"intro",id:"carn",val:"1",x1:"176",y1:"974",x:"0.04296875",y:"0.4755859375",form:"poly",text:""},{block:"intro",id:"carn",val:"1",x1:"156",y1:"973",x:"0.0380859375",y:"0.4750976563",form:"poly",text:""},{block:"intro",id:"carn",val:"1",x1:"156",y1:"898",x:"0.0380859375",y:"0.4384765625",form:"poly",text:""},{block:"intro",id:"carn",val:"1",x1:"156",y1:"898",x:"0.0380859375",y:"0.4384765625",form:"text",text:"carniceria hispana"},{block:"intro",id:"opto",val:"2",x1:"1808",y1:"949",x:"0.44140625",y:"0.4633789063",form:"text",text:"optometrist"},{block:"intro",id:"opto",val:"2",x1:"1808",y1:"949",x:"0.44140625",y:"0.4633789063",form:"poly",text:""},{block:"intro",id:"opto",val:"2",x1:"1952",y1:"953",x:"0.4765625",y:"0.4653320313",form:"poly",text:""},{block:"intro",id:"opto",val:"2",x1:"1952",y1:"971",x:"0.4765625",y:"0.4741210938",form:"poly",text:""},{block:"intro",id:"opto",val:"2",x1:"1808",y1:"973",x:"0.44140625",y:"0.4750976563",form:"poly",text:""},{block:"intro",id:"opto",val:"2",x1:"1808",y1:"949",x:"0.44140625",y:"0.4633789063",form:"poly",text:""},{block:"intro2",id:"never",val:"1",x1:"479",y1:"1062",x:"0.1169433594",y:"0.5185546875",form:"text",text:"Never Forget"},{block:"intro2",id:"never",val:"1",x1:"479",y1:"1062",x:"0.1169433594",y:"0.5185546875",form:"poly",text:""},{block:"intro2",id:"never",val:"1",x1:"522",y1:"1062",x:"0.1274414063",y:"0.5185546875",form:"poly",text:""},{block:"intro2",id:"never",val:"1",x1:"522",y1:"1089",x:"0.1274414063",y:"0.5317382813",form:"poly",text:""},{block:"intro2",id:"never",val:"1",x1:"479",y1:"1089",x:"0.1169433594",y:"0.5317382813",form:"poly",text:""},{block:"intro2",id:"never",val:"1",x1:"479",y1:"1062",x:"0.1169433594",y:"0.5185546875",form:"poly",text:""},{block:"intro3",id:"know",val:"1",x1:"3357",y1:"1039",x:"0.8195800781",y:"0.5073242188",form:"poly",text:""},{block:"intro3",id:"know",val:"1",x1:"3456",y1:"1039",x:"0.84375",y:"0.5073242188",form:"poly",text:""},{block:"intro3",id:"know",val:"1",x1:"3456",y1:"1056",x:"0.84375",y:"0.515625",form:"poly",text:""},{block:"intro3",id:"know",val:"1",x1:"3357",y1:"1056",x:"0.8195800781",y:"0.515625",form:"poly",text:""},{block:"intro3",id:"know",val:"1",x1:"3357",y1:"1039",x:"0.8195800781",y:"0.5073242188",form:"poly",text:""},{block:"intro3",id:"know",val:"1",x1:"3357",y1:"1039",x:"0.8195800781",y:"0.5073242188",form:"text",text:"If you don't know, now, now you know"}];function xt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xe(t){let e,r,n;t.length!==2?(e=xt,r=(a,u)=>xt(t(a),u),n=(a,u)=>t(a)-u):(e=t===xt||t===Xe?t:tn,r=t,n=t);function o(a,u,i=0,p=a.length){if(i<p){if(e(u,u)!==0)return p;do{const c=i+p>>>1;r(a[c],u)<0?i=c+1:p=c}while(i<p)}return i}function l(a,u,i=0,p=a.length){if(i<p){if(e(u,u)!==0)return p;do{const c=i+p>>>1;r(a[c],u)<=0?i=c+1:p=c}while(i<p)}return i}function s(a,u,i=0,p=a.length){const c=o(a,u,i,p-1);return c>i&&n(a[c-1],u)>-n(a[c],u)?c-1:c}return{left:o,center:s,right:l}}function tn(){return 0}function en(t){return t===null?NaN:+t}const nn=xe(xt),rn=nn.right;xe(en).center;const on=Math.sqrt(50),an=Math.sqrt(10),sn=Math.sqrt(2);function _t(t,e,r){const n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),l=n/Math.pow(10,o),s=l>=on?10:l>=an?5:l>=sn?2:1;let a,u,i;return o<0?(i=Math.pow(10,-o)/s,a=Math.round(t*i),u=Math.round(e*i),a/i<t&&++a,u/i>e&&--u,i=-i):(i=Math.pow(10,o)*s,a=Math.round(t/i),u=Math.round(e/i),a*i<t&&++a,u*i>e&&--u),u<a&&.5<=r&&r<2?_t(t,e,r*2):[a,u,i]}function ln(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[o,l,s]=n?_t(e,t,r):_t(t,e,r);if(!(l>=o))return[];const a=l-o+1,u=new Array(a);if(n)if(s<0)for(let i=0;i<a;++i)u[i]=(l-i)/-s;else for(let i=0;i<a;++i)u[i]=(l-i)*s;else if(s<0)for(let i=0;i<a;++i)u[i]=(o+i)/-s;else for(let i=0;i<a;++i)u[i]=(o+i)*s;return u}function Ot(t,e,r){return e=+e,t=+t,r=+r,_t(t,e,r)[2]}function cn(t,e,r){e=+e,t=+t,r=+r;const n=e<t,o=n?Ot(e,t,r):Ot(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function un(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function fn(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(l){for(o=0;o<r;++o)n[o]=t[o]*(1-l)+e[o]*l;return n}}function dn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mn(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),l=new Array(r),s;for(s=0;s<n;++s)o[s]=Gt(t[s],e[s]);for(;s<r;++s)l[s]=e[s];return function(a){for(s=0;s<n;++s)l[s]=o[s](a);return l}}function pn(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function hn(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=Gt(t[o],e[o]):n[o]=e[o];return function(l){for(o in r)n[o]=r[o](l);return n}}function Gt(t,e){var r=typeof e,n;return e==null||r==="boolean"?Ge(e):(r==="number"?Ft:r==="string"?(n=re(e))?(e=n,ne):Ye:e instanceof re?ne:e instanceof Date?pn:dn(e)?fn:Array.isArray(e)?mn:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hn:Ft)(t,e)}function gn(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function vn(t){return function(){return t}}function yn(t){return+t}var se=[0,1];function tt(t){return t}function Ct(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:vn(isNaN(e)?NaN:.5)}function xn(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function _n(t,e,r){var n=t[0],o=t[1],l=e[0],s=e[1];return o<n?(n=Ct(o,n),l=r(s,l)):(n=Ct(n,o),l=r(l,s)),function(a){return l(n(a))}}function wn(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),l=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)o[s]=Ct(t[s],t[s+1]),l[s]=r(e[s],e[s+1]);return function(a){var u=rn(t,a,1,n)-1;return l[u](o[u](a))}}function bn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kn(){var t=se,e=se,r=Gt,n,o,l,s=tt,a,u,i;function p(){var d=Math.min(t.length,e.length);return s!==tt&&(s=xn(t[0],t[d-1])),a=d>2?wn:_n,u=i=null,c}function c(d){return d==null||isNaN(d=+d)?l:(u||(u=a(t.map(n),e,r)))(n(s(d)))}return c.invert=function(d){return s(o((i||(i=a(e,t.map(n),Ft)))(d)))},c.domain=function(d){return arguments.length?(t=Array.from(d,yn),p()):t.slice()},c.range=function(d){return arguments.length?(e=Array.from(d),p()):e.slice()},c.rangeRound=function(d){return e=Array.from(d),r=gn,p()},c.clamp=function(d){return arguments.length?(s=d?!0:tt,p()):s!==tt},c.interpolate=function(d){return arguments.length?(r=d,p()):r},c.unknown=function(d){return arguments.length?(l=d,c):l},function(d,y){return n=d,o=y,p()}}function Mn(){return kn()(tt,tt)}function Tn(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function wt(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function nt(t){return t=wt(Math.abs(t)),t?t[1]:NaN}function Sn(t,e){return function(r,n){for(var o=r.length,l=[],s=0,a=t[0],u=0;o>0&&a>0&&(u+a+1>n&&(a=Math.max(1,n-u)),l.push(r.substring(o-=a,o+a)),!((u+=a+1)>n));)a=t[s=(s+1)%t.length];return l.reverse().join(e)}}function En(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Nn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bt(t){if(!(e=Nn.exec(t)))throw new Error("invalid format: "+t);var e;return new Yt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bt.prototype=Yt.prototype;function Yt(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Yt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pn(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var _e;function jn(t,e){var r=wt(t,e);if(!r)return t+"";var n=r[0],o=r[1],l=o-(_e=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=n.length;return l===s?n:l>s?n+new Array(l-s+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+wt(t,Math.max(0,e+l-1))[0]}function le(t,e){var r=wt(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const ce={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Tn,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>le(t*100,e),r:le,s:jn,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ue(t){return t}var fe=Array.prototype.map,de=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function An(t){var e=t.grouping===void 0||t.thousands===void 0?ue:Sn(fe.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?ue:En(fe.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function i(c){c=bt(c);var d=c.fill,y=c.align,x=c.sign,P=c.symbol,k=c.zero,j=c.width,R=c.comma,v=c.precision,_=c.trim,f=c.type;f==="n"?(R=!0,f="g"):ce[f]||(v===void 0&&(v=12),_=!0,f="g"),(k||d==="0"&&y==="=")&&(k=!0,d="0",y="=");var g=P==="$"?r:P==="#"&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",w=P==="$"?n:/[%p]/.test(f)?s:"",M=ce[f],b=/[defgprs%]/.test(f);v=v===void 0?6:/[gprs]/.test(f)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function z(m){var E=g,T=w,L,X,D;if(f==="c")T=M(m)+T,m="";else{m=+m;var N=m<0||1/m<0;if(m=isNaN(m)?u:M(Math.abs(m),v),_&&(m=Pn(m)),N&&+m==0&&x!=="+"&&(N=!1),E=(N?x==="("?x:a:x==="-"||x==="("?"":x)+E,T=(f==="s"?de[8+_e/3]:"")+T+(N&&x==="("?")":""),b){for(L=-1,X=m.length;++L<X;)if(D=m.charCodeAt(L),48>D||D>57){T=(D===46?o+m.slice(L+1):m.slice(L))+T,m=m.slice(0,L);break}}}R&&!k&&(m=e(m,1/0));var F=E.length+m.length+T.length,I=F<j?new Array(j-F+1).join(d):"";switch(R&&k&&(m=e(I+m,I.length?j-T.length:1/0),I=""),y){case"<":m=E+m+T+I;break;case"=":m=E+I+m+T;break;case"^":m=I.slice(0,F=I.length>>1)+E+m+T+I.slice(F);break;default:m=I+E+m+T;break}return l(m)}return z.toString=function(){return c+""},z}function p(c,d){var y=i((c=bt(c),c.type="f",c)),x=Math.max(-8,Math.min(8,Math.floor(nt(d)/3)))*3,P=Math.pow(10,-x),k=de[8+x/3];return function(j){return y(P*j)+k}}return{format:i,formatPrefix:p}}var vt,we,be;zn({thousands:",",grouping:[3],currency:["$",""]});function zn(t){return vt=An(t),we=vt.format,be=vt.formatPrefix,vt}function Ln(t){return Math.max(0,-nt(Math.abs(t)))}function In(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nt(e)/3)))*3-nt(Math.abs(t)))}function Rn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nt(e)-nt(t))+1}function Fn(t,e,r,n){var o=cn(t,e,r),l;switch(n=bt(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(l=In(o,s))&&(n.precision=l),be(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=Rn(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=Ln(o))&&(n.precision=l-(n.type==="%")*2);break}}return we(n)}function On(t){var e=t.domain;return t.ticks=function(r){var n=e();return ln(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return Fn(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,l=n.length-1,s=n[o],a=n[l],u,i,p=10;for(a<s&&(i=s,s=a,a=i,i=o,o=l,l=i);p-- >0;){if(i=Ot(s,a,r),i===u)return n[o]=s,n[l]=a,e(n);if(i>0)s=Math.floor(s/i)*i,a=Math.ceil(a/i)*i;else if(i<0)s=Math.ceil(s*i)/i,a=Math.floor(a*i)/i;else break;u=i}return t},t}function Dt(){var t=Mn();return t.copy=function(){return bn(t,Dt())},un.apply(t,arguments),On(t)}var Cn=H('<div id="viewer" class="svelte-bjpg5e"></div>');function Dn(t,e){kt(e,!0);let r,n,o=W(0),l=W(!1),s=Dt().domain([0,1]).range([0,Math.PI*2]),a=Dt().domain([0,1]).range([Math.PI/2,-Math.PI/2]),u=[];function i(){let c=e.markersRaw.reduce((d,y)=>(d[y.id]||(d[y.id]={id:y.id,polygon:[],text:null}),y.form==="poly"?d[y.id].polygon.push({yaw:s(y.x)+Math.PI,pitch:a(y.y)}):y.form==="text"&&(d[y.id].text=y.text),d),{});u=Object.values(c).map(d=>{let y=[];if(d.polygon.length>0&&y.push({id:`${d.id}-polygon`,className:"fade",polygon:d.polygon.map(x=>[x.yaw,x.pitch]),svgStyle:{stroke:"rgba(255, 0, 50, 0.8)",strokeWidth:"2px",marginLeft:"-1px",opacity:null,strokeOpacity:"none",fill:"none"}}),d.text){const x=d.polygon[0]||{yaw:0,pitch:0};y.push({id:`${d.id}-text`,className:"fade",position:x,html:`<div>${d.text}</div>`,anchor:"bottom left",scale:{zoom:[1,1],yaw:[1,1.5],pitch:[1,1.5]},style:{maxWidth:"100px",color:"white",opacity:null,marginLeft:"-1px",paddingLeft:"5px",paddingRight:"5px",backgroundColor:"red",fontSize:"10px",fontFamily:"Helvetica, sans-serif",textAlign:"center"}})}return y}).flat(),console.log("Parsed markers:",u)}ut(()=>{const c=e.coords;n&&c&&(n.rotate({yaw:c[0],pitch:c[1]}),n.zoom(e.zoom))}),ut(()=>{e.value}),qt(async()=>{i(),console.log(u);try{let[{Viewer:c,TextureLoader:d},y,{MarkersPlugin:x},P]=await Promise.all([gt(()=>import("../chunks/BifLpx9Z.js"),[],import.meta.url),gt(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),gt(()=>import("../chunks/CM8BuYiJ.js"),__vite__mapDeps([1,2]),import.meta.url),gt(()=>Promise.resolve({}),__vite__mapDeps([3]),import.meta.url)]);n=new c({container:r,panorama:e.panoramaUrl,navbar:!1,loading_html:null,loading_img:null,defaultPitch:6.18,defaultYaw:-.002,plugins:[[x,{markers:u}]]}),n.addEventListener("panorama-loaded",k=>{O(o,1),O(l,!0)}),n.addEventListener("ready",()=>{n.rotate({yaw:e.coords[0],pitch:e.coords[1]}),n.addEventListener("position-updated",({position:k})=>{console.log(n.getZoomLevel()),console.log(`new position is yaw: ${k.yaw} pitch: ${k.pitch}`)})})}catch(c){console.error("Failed to load photo sphere viewer:",c)}return()=>{n&&n.destroy()}});var p=Cn();ve(p,c=>r=c,()=>r),ct(()=>ge(p,`opacity: ${h(o)??""}; transition: opacity 0.5s ease-in-out;`)),C(t,p),Mt()}var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var It,me;function Bn(){if(me)return It;me=1;var t="Expected a function",e=NaN,r="[object Symbol]",n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,u=typeof yt=="object"&&yt&&yt.Object===Object&&yt,i=typeof self=="object"&&self&&self.Object===Object&&self,p=u||i||Function("return this")(),c=Object.prototype,d=c.toString,y=Math.max,x=Math.min,P=function(){return p.Date.now()};function k(f,g,w){var M,b,z,m,E,T,L=0,X=!1,D=!1,N=!0;if(typeof f!="function")throw new TypeError(t);g=_(g)||0,j(w)&&(X=!!w.leading,D="maxWait"in w,z=D?y(_(w.maxWait)||0,g):z,N="trailing"in w?!!w.trailing:N);function F(S){var V=M,Y=b;return M=b=void 0,L=S,m=f.apply(Y,V),m}function I(S){return L=S,E=setTimeout(Z,g),X?F(S):m}function Tt(S){var V=S-T,Y=S-L,ot=g-V;return D?x(ot,z-Y):ot}function pt(S){var V=S-T,Y=S-L;return T===void 0||V>=g||V<0||D&&Y>=z}function Z(){var S=P();if(pt(S))return K(S);E=setTimeout(Z,Tt(S))}function K(S){return E=void 0,N&&M?F(S):(M=b=void 0,m)}function J(){E!==void 0&&clearTimeout(E),L=0,M=T=b=E=void 0}function St(){return E===void 0?m:K(P())}function rt(){var S=P(),V=pt(S);if(M=arguments,b=this,T=S,V){if(E===void 0)return I(T);if(D)return E=setTimeout(Z,g),F(T)}return E===void 0&&(E=setTimeout(Z,g)),m}return rt.cancel=J,rt.flush=St,rt}function j(f){var g=typeof f;return!!f&&(g=="object"||g=="function")}function R(f){return!!f&&typeof f=="object"}function v(f){return typeof f=="symbol"||R(f)&&d.call(f)==r}function _(f){if(typeof f=="number")return f;if(v(f))return e;if(j(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=j(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=f.replace(n,"");var w=l.test(f);return w||s.test(f)?a(f.slice(2),w?2:8):o.test(f)?e:+f}return It=k,It}var Wn=Bn();const qn=Vn(Wn);function Gn(){var t;return((t=window==null?void 0:window.visualViewport)==null?void 0:t.width)||document.documentElement.clientWidth}function Yn(){var t;return((t=window==null?void 0:window.visualViewport)==null?void 0:t.height)||document.documentElement.clientHeight}var ft,dt,et,mt,Vt;class Un{constructor(e=250){at(this,mt);at(this,ft,W(0));at(this,dt,W(0));at(this,et);ut(()=>(Nt(this,mt,Vt).call(this),Zt(this,et,qn(Nt(this,mt,Vt).bind(this),e)),window==null||window.visualViewport.addEventListener("resize",$(this,et)),()=>{window==null||window.visualViewport.removeEventListener("resize",$(this,et))}))}get width(){return h($(this,ft))}get height(){return h($(this,dt))}}ft=new WeakMap,dt=new WeakMap,et=new WeakMap,mt=new WeakSet,Vt=function(){O($(this,ft),Gn(),!0),O($(this,dt),Yn(),!0)};var Xn=H('<div><div class="text-wrapper svelte-gozvi"><p class="text-fg svelte-gozvi" style="opacity: 1"><span class="text-inner svelte-gozvi"> </span></p> <p aria-hidden="true" class="text-bg svelte-gozvi" style="opacity: 1"><span class="text-inner svelte-gozvi"> </span></p></div></div>'),Hn=H('<div class="wrapper svelte-gozvi"><div><p class="moving svelte-gozvi"> </p> <!></div> <div class="text svelte-gozvi"><!></div></div>');function Rt(t,e){kt(e,!0);let r={},n=W(!1),o=W(50),l={};function s(v,_){if(_===0)return 0;const f=1/(_+1);for(let g=1;g<=_;g++)if(!(v>f*g))return g;return _}let a=e.markers.reduce((v,_)=>{const f=_.val,g=_.id,w=`${f}-${g}`;return v[w]||(v[w]=[]),v[w].push(_),v},{});console.log(a);let u=[...new Set(e.markers.map(v=>v.id))];qt(()=>{e.props.slides.forEach((v,_)=>{r[_]=v.coords.split(",").map(f=>+f),l[_]=+v.zoom}),O(n,!0)});let i=zt([]),p=W(0),c=W(void 0),d=W(zt([])),y=new Un,x=W(zt([0,0]));ut(()=>{if(h(n)){if(h(c)===void 0||h(c)===null){O(x,e.props.default_coords.split(",").map(m=>+m),!0),O(o,50);return}const v=l[h(c)]?l[h(c)]:50,_=l[h(c)-1]??50,f=r[h(c)]??r[0],g=r[h(c)-1]??e.props.default_coords.split(",").map(m=>+m),w=h(d)[h(c)]??0,M=Ue(w),b=g[0]+(f[0]-g[0])*M,z=g[1]+(f[1]-g[1])*M;O(o,_+(v-_)*M),O(x,[b,z],!0)}});function P(v,_,f){return Math.max(Math.min(v,f),_)}ut(()=>{O(d,i.map((v,_)=>{const f=v.getBoundingClientRect().top+window.scrollY;v.getBoundingClientRect().height;const g=f-y.height,w=f;let M=h(p)-g;M=P(M,0,w-g);let b=M/(w-g);return P(b,0,1)}),!0)});const k=`assets/images/${e.props.panorama_id}.jpg`;var j=lt(),R=U(j);ye(R,{onerror:v=>console.error(v)},v=>{var _=lt(),f=U(_);{var g=w=>{var M=Hn();const b=ht(()=>s(h(d)[h(c)],u.length));var z=q(M),m=q(z),E=q(m);G(m);var T=A(m,2);{var L=N=>{const F=ht(()=>h(o)?h(o):50);Dn(N,{panoramaUrl:k,get coords(){return h(x)},get zoom(){return h(F)},get value(){return h(c)},get markersRaw(){return e.markers}})};Q(T,N=>{h(x)&&N(L)})}G(z);var X=A(z,2),D=q(X);He(D,{top:-100,bottom:-100,increments:10,get value(){return h(c)},set value(N){O(c,N,!0)},children:(N,F)=>{var I=lt(),Tt=U(I);Bt(Tt,17,()=>e.props.slides,Wt,(pt,Z,K)=>{var J=Xn();const St=ht(()=>h(c)===K),rt=ht(()=>K===e.props.slides.length-1);let S;var V=q(J),Y=q(V),ot=q(Y),ke=q(ot,!0);G(ot),G(Y);var Ut=A(Y,2),Xt=q(Ut),Me=q(Xt,!0);G(Xt),G(Ut),G(V),G(J),ve(J,(it,Te)=>i[Te]=it,it=>i==null?void 0:i[it],()=>[K]),ct(it=>{S=oe(J,1,`step-${K} scrolly-block`,"svelte-gozvi",S,it),Lt(ke,h(Z).text),Lt(Me,h(Z).text)},[()=>({active:h(St),isLast:h(rt)})]),C(pt,J)}),C(N,I)},$$slots:{default:!0}}),G(X),G(M),ct((N,F)=>{oe(z,1,`container value-${h(c)??""} percent-${h(b)??""}`,"svelte-gozvi"),ge(m,`left: ${h(x)[0]??""}%; background:black;color:white; font-family: monospace;`),Lt(E,`Value: ${h(c)??""}, Progress: ${N??""}, Position: ${F??""}`)},[()=>h(d)[h(c)]?h(d)[h(c)].toFixed(6):"0.00",()=>h(x).map(N=>N.toFixed(6)).join(", ")]),C(w,M)};Q(f,w=>{h(n)&&w(g)})}C(v,_)}),Ze("y",()=>h(p),v=>O(p,v,!0)),C(t,j),Mt()}var Zn=H("<!> <!> <!>",1),Kn=H('<!> <div style="height: 100vh;"></div>',1);function Jn(t,e){kt(e,!0);let r=W(!1),n=Qe.reduce((a,u)=>{const i=u.block;return a[i]||(a[i]=[]),a[i].push(u),a},{});qt(()=>{O(r,!0)});let o=Be("copy");var l=lt(),s=U(l);ye(s,{onerror:a=>console.error(a)},a=>{var u=lt(),i=U(u);{var p=c=>{var d=Kn(),y=U(d);Bt(y,17,()=>o.body||[],Wt,(x,P)=>{let k=()=>h(P).type,j=()=>h(P).value;var R=Zn(),v=U(R);{var _=b=>{Rt(b,{get props(){return j()},get markers(){return n[k()]}})};Q(v,b=>{k()==="intro"&&b(_)})}var f=A(v,2);{var g=b=>{Rt(b,{get props(){return j()},get markers(){return n[k()]}})};Q(f,b=>{k()==="intro2"&&b(g)})}var w=A(f,2);{var M=b=>{Rt(b,{get props(){return j()},get markers(){return n[k()]}})};Q(w,b=>{k()==="intro3"&&b(M)})}C(x,R)}),he(2),C(c,d)};Q(i,c=>{h(r)&&n&&c(p)})}C(a,u)}),C(t,l),Mt()}function $n(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 6.12.0"),console.log("build: 2025-06-12-09:11"),console.log("--- --- --- --- --- ---")}var Qn=H("<!> <!>",1);function dr(t,e){kt(e,!0),$n();const r=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Regular-Web.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Bold-Web.woff2"],{title:n,description:o,url:l,keywords:s}=ie;ee("copy",ie),ee("data",e.data);var a=Qn(),u=U(a);$e(u,{title:n,description:o,url:l,preloadFont:r,keywords:s});var i=A(u,2);Jn(i,{}),C(t,a),Mt()}export{dr as component};
